// Test chop() with nested pattern
// ((1,0), 2, (3,3,3), 4)

// Initialize global context
var global = init GLOBAL

// Configure global parameters
global.audioPath("test-assets/audio")
global.tempo(120)
global.beat(4)
global.tick(4)

// Initialize sequence
var arp = init global.seq

// Configure sequence
arp.beat(4 by 4).length(1)

// Load and chop arpeggio (1.0s / 4 = 0.25s per slice)
arp.audio("arpeggio_c.wav").chop(4)

// Nested pattern: ((1,0), 2, (3,3,3), 4)
arp.play((1, 0), 2, (3, 3, 3), 4)

// Start playback
global.run()
arp.run()
