# Reserved Keywords Implementation (RUN/LOOP/STOP/MUTE)

## 概要
`RUN`, `LOOP`, `STOP`, `MUTE`を大文字の予約語として実装し、複数シーケンスを引数に取る機能を追加する。これにより、設定変更の反映タイミングを明確にし、より直感的なDSL構文を提供する。

## 背景
現在のDSLでは`global.start()`と`sequence.run()`の区別が曖昧で、設定変更の反映タイミングが不明確だった。新しい予約語システムにより、設定と実行を明確に分離し、より読みやすい構文を実現する。

## 要件

### 構文例
```js
// 現在の構文
global.start()
kick.run()
snare.loop()

// 新しい構文
global.start()
RUN(kick)
LOOP(snare, hihat)
STOP(kick)
MUTE(snare)
```

### 設定変更の反映タイミング
- **`RUN`**: 即座に設定変更を反映して実行
- **`LOOP`**: 次サイクルから設定変更を反映
- **設定変更**: `tempo()`, `beat()`, `play()`, `chop()`等は即座には反映されない

## 実装計画

### Phase 1: パーサー拡張
- 大文字の予約語をトークンとして認識
- `RUN(seq1, seq2, seq3)`のような構文を解析
- 引数として複数のシーケンス名を受け取る

### Phase 2: インタプリタ実装
- 予約語の処理ロジックを実装
- 複数シーケンスへの一括操作
- 設定変更の反映タイミング制御

### Phase 3: 設定同期システム
- 設定変更のバッファリング
- 次サイクルでの設定反映
- 即座反映と次サイクル反映の切り替え

### Phase 4: テスト実装
- 予約語のパーステスト
- 複数シーケンス操作のテスト
- 設定反映タイミングのテスト

### Phase 5: ドキュメント更新
- DSL仕様書の更新
- 新構文の説明
- 移行ガイド

## 完了基準
- [ ] パーサーで予約語を正しく認識
- [ ] インタプリタで予約語を正しく処理
- [ ] 設定変更の反映タイミングが正しく動作
- [ ] 全てのテストが通過
- [ ] ドキュメントが更新されている
- [ ] 既存機能に影響がない

## 見積もり
8-12日

## 関連
- REPLバッファリング・マルチライン対応完了後の次の主要機能
- ブランチ: `feature/reserved-keywords-implementation`
- 詳細設計: `ISSUE_RESERVED_KEYWORDS_IMPLEMENTATION.md`

